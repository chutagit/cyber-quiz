<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz o cyberbezpieczeństwie</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
    #quiz-container { max-width: 700px; margin: 60px auto; background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1 { text-align: center; }
    .question { font-size: 1.2em; margin-bottom: 20px; }
    .answers button { display: block; width: 100%; margin: 8px 0; padding: 10px; font-size: 1em; border-radius: 8px; border: 1px solid #ccc; background: #f9f9f9; cursor: pointer; transition: background 0.3s; }
    .answers button:hover { background: #e6f7ff; }
    .answers button.correct { background: #c8f7c5; border-color: #5cb85c; }
    .answers button.incorrect { background: #f7c5c5; border-color: #d9534f; }
    #next-btn, #restart-btn { margin-top: 20px; display: none; background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
    #next-btn:hover, #restart-btn:hover { background: #0056b3; }
    #score { text-align: center; font-size: 1.3em; margin-top: 20px; }
  </style>
</head>
<body>
  <div id="quiz-container">
    <h1>Quiz: Cyberbezpieczeństwo i płatności online</h1>
    <div id="quiz"></div>
    <button id="next-btn">Dalej</button>
    <button id="restart-btn">Zagraj ponownie</button>
    <div id="score"></div>
  </div>

  <script>
    let questions = [];
    let currentQuestionIndex = 0;
    let score = 0;

    async function loadQuestions() {
      const response = await fetch('questions.json');
      questions = await response.json();
      showQuestion();
    }

    function showQuestion() {
      const quizDiv = document.getElementById('quiz');
      const nextBtn = document.getElementById('next-btn');
      const restartBtn = document.getElementById('restart-btn');
      const scoreDiv = document.getElementById('score');
      
      nextBtn.style.display = 'none';
      restartBtn.style.display = 'none';
      scoreDiv.textContent = '';
      
      quizDiv.innerHTML = '';

      if (currentQuestionIndex < questions.length) {
        const q = questions[currentQuestionIndex];
        const questionElem = document.createElement('div');
        questionElem.classList.add('question');
        questionElem.textContent = q.question;
        quizDiv.appendChild(questionElem);

        const answersDiv = document.createElement('div');
        answersDiv.classList.add('answers');
        q.answers.forEach(answer => {
          const btn = document.createElement('button');
          btn.textContent = answer.text;
          btn.onclick = () => selectAnswer(btn, answer.correct);
          answersDiv.appendChild(btn);
        });
        quizDiv.appendChild(answersDiv);
      } else {
        quizDiv.innerHTML = '<h2>Koniec quizu!</h2>';
        scoreDiv.textContent = `Twój wynik: ${score} / ${questions.length}`;
        restartBtn.style.display = 'inline-block';
      }
    }

    function selectAnswer(button, correct) {
      const buttons = button.parentElement.querySelectorAll('button');
      buttons.forEach(b => b.disabled = true);
      if (correct) {
        button.classList.add('correct');
        score++;
      } else {
        button.classList.add('incorrect');
        const correctBtn = [...buttons].find(b => b.textContent === button.parentElement.querySelectorAll('button')[Array.from(button.parentElement.children).findIndex(btn => questions[currentQuestionIndex].answers[Array.from(button.parentElement.children).indexOf(btn)].correct)].textContent);
        correctBtn?.classList.add('correct');
      }
      document.getElementById('next-btn').style.display = 'inline-block';
    }

    document.getElementById('next-btn').addEventListener('click', () => {
      currentQuestionIndex++;
      showQuestion();
    });

    document.getElementById('restart-btn').addEventListener('click', () => {
      currentQuestionIndex = 0;
      score = 0;
      showQuestion();
    });

    loadQuestions();
  </script>
</body>
</html>
